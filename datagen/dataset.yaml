# Dataset generation configuration.
#
# Approach:
# - Train on legal positions only. Real games cover openingâ†’endgame,
#   2-32 pieces, and natural turn/castling distributions.
# - Test on legal positions (primary eval) + random positions (robustness check).
# - Turn/castling loss is always computed during training (all positions are legal).
#   The legal flag is only used during eval to mask metrics on test_random.
#
# Manifest columns for eval slicing:
#   filename, fen, legal, turn, castling, en_passant, piece_count,
#   has_highlight, style, flipped
#
# Run: node generate.js --config dataset.yaml

splits:
  train:
    output_dir: ../data/train
    sources:
      - type: pgn
        pgn: ../data/lichess_db_standard_rated_2015-08.pgn
        count: 150000

  test:
    output_dir: ../data/test
    sources:
      - type: pgn
        pgn: ../data/lichess_db_standard_rated_2015-08.pgn
        count: 20000

  # Robustness eval: can the model still identify pieces in
  # positions it's never seen in real games?
  test_random:
    output_dir: ../data/test_random
    sources:
      - type: random
        count: 5000

rendering:
  image_size: 480
  seed: 42
  highlight_pct: 0.6   # 60% of boards show last-move highlights
  texture_pct: 0.5     # 50% of boards use texture backgrounds (wood, marble, etc.)
